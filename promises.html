<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Promises</title>

</head>
<body>


<script>
    "use strict";

    let url = 'https://api.github.com/users/delabove/events/public';

    //FILLED IN THE NECESSARY COMPONENTS  OF THE FETCH
    // fetch(url, {headers: {'Authorization': 'git_KEY'}})
    //     .then(response => console.log(response))
    //     .catch(error => console.error(error));


    // CREATED VARIABLE FOR THE PROMISE
    const gitPromise = fetch(url, {headers: {'Authorization': 'git_KEY'}});

    gitPromise.then( response => response.json()
        .then( events => {
            console.log(event)

            // do something with the data
            let generatedHTML= "";
            for(let event of events) {
                if(event.type === "PushEvent") {
                    console.log(event.created_at);
                    console.log(event.payload.commits[0].message);
                    break;
                }
                console.log('Made it!!')
            }
            // users.forEach( userObj  => {
                // do something with the username login
                // console.log(userObj.login);
            // });
        })
    );


    // const githubPromise = fetch(url, {headers: {'Authorization': 'git_KEY'}});
    // const bitbucketPromise = fetch('https://api.bitbucket.org/2.0/repositories');
    //
    // Promise.all([githubPromise, bitbucketPromise])
    //     .then(function(data) {
    //         // here data is an array of the resolved values from each promise
    //         // we can now do something with both pieces of data
    //     })
    //     .catch(function(error) {
    //         // handle errors
    //     });


</script>
<script src="js/keys.js"></script>
</body>
</html>